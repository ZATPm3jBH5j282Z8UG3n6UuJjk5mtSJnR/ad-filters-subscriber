##########################################
## !!! 1st Rule of Clash Mihomo !!!
##########################################
# config/application.yaml
# Paste this file into your fork at config/application.yaml
application:
  # Inputs: remote sources to fetch and merge
  input:
    - name: "adblockmihomo"
      path: "https://raw.githubusercontent.com/217heidai/adblockfilters/main/rules/adblockmihomo.yaml"
      type: clash
    - name: "AWAvenue-Ads-Rule-Clash"
      path: "https://gcore.jsdelivr.net/gh/TG-Twilight/AWAvenue-Ads-Rule@main/Filters/AWAvenue-Ads-Rule-Clash.yaml"
      type: clash
    - name: "adblock_reject_REIJI007"
      path: "https://raw.githubusercontent.com/REIJI007/AdBlock_Rule_For_Clash/main/adblock_reject.yaml"
      type: clash
    - name: "hblock_highrisk"
      path: "https://raw.githubusercontent.com/hblockcc/clash-rules/master/reject/highrisk.yaml"
      type: clash
    - name: "hblock_telemetry"
      path: "https://raw.githubusercontent.com/hblockcc/clash-rules/master/reject/telemetry.yaml"
      type: clash
    - name: "hblock_anti_gov"
      path: "https://raw.githubusercontent.com/hblockcc/clash-rules/master/reject/anti_gov.yaml"
      type: clash
    - name: "hblock_tracking"
      path: "https://raw.githubusercontent.com/hblockcc/clash-rules/master/reject/tracking.yaml"
      type: clash
    - name: "hblock_malware"
      path: "https://raw.githubusercontent.com/hblockcc/clash-rules/master/reject/malware.yaml"
      type: clash
    - name: "blackhole_reject_highrisk"
      path: "https://raw.githubusercontent.com/blackhole-rules/clash-rules/master/reject-highrisk.yaml"
      type: clash
    - name: "blackmatrix_telemetry"
      path: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telemetry/Telemetry.yaml"
      type: clash
    - name: "loyalsoldier_reject"
      path: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
      type: hosts
    - name: "blackmatrix_advertising_yaml"
      path: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising.yaml"
      type: clash
    - name: "blackmatrix_advertising_domain"
      path: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/Advertising_Domain.txt"
      type: hosts
    - name: "ACL4SSR_BanProgramAD"
      path: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanProgramAD.list"
      type: hosts
    - name: "ACL4SSR_BanEasyPrivacy"
      path: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanEasyPrivacy.list"
      type: hosts
    - name: "ACL4SSR_BanEasyListChina"
      path: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanEasyListChina.list"
      type: hosts
    - name: "ACL4SSR_BanEasyList"
      path: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanEasyList.list"
      type: hosts
    - name: "ACL4SSR_BanAD"
      path: "https://cdn.jsdelivr.net/gh/ACL4SSR/ACL4SSR@master/Clash/BanAD.list"
      type: hosts
    - name: "earoftoast_ProgramAD"
      path: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/ProgramAD.yaml"
      type: clash
    - name: "earoftoast_AD"
      path: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/AD.yaml"
      type: clash
    - name: "earoftoast_EasyList"
      path: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/EasyList.yaml"
      type: clash
    - name: "earoftoast_EasyListChina"
      path: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/EasyListChina.yaml"
      type: clash
    - name: "earoftoast_EasyPrivacy"
      path: "https://raw.githubusercontent.com/earoftoast/clash-rules/main/EasyPrivacy.yaml"
      type: clash
    - name: "CatsTeam_adrules_domainset"
      path: "https://raw.githubusercontent.com/Cats-Team/AdRules/main/adrules_domainset.txt"
      type: hosts
    - name: "anti-ad-net"
      path: "https://anti-ad.net/clash.yaml"
      type: clash

  # Output: single merged Clash file
  output:
    files:
      - name: "mihomo-clash-1st-rule.yaml"
        type: clash
        header: |
          # Merged Clash rules generated from multiple sources
          # Sources listed in config/application.yaml

  # Processing options (if supported by the project)
  processing:
    deduplicate: true
    normalize: true
    filters:
      - keep: domain
      - keep: rule


  # 程序运行配置（可选）
  # ！删除即使用默认配置
  config:

    expected_quantity: 2000000  #预期规则数量
    fault_tolerance: 0.001 #容错率
    warn_limit: 6 #警告阈值, 原始规则长度小于该值时会输出警告日志

    # 域名检测，启用时将进行解析以验证域名有效性
    # ！开启此功能可能导致处理时间大幅延长
    # ！仅支持特定规则，具体原因请查看项目主页说明
    domain-detect:
      enable: false   # 是否启用
      timeout: 2000   # 查询超时（毫秒）
      concurrency: 10 # 并发查询数
      cache-ttl-min: 600            # 缓存最小TTL（秒）
      cache-ttl-max: 86400          # 缓存最大TTL（秒）
      cache-negative-ttl: 300       # 失败结果缓存TTL（秒）
      provider:       # 使用的 DNS 服务器，仅支持 IP，多个之间具备优先级; 为空则使用默认DNS
        - 223.5.5.5

    # 排除指定内容
    # 在解析结束后，规则内容命中此列表将直接认定为无效
    exclude:
      - "www.example.org"

    # 通过文件收集程序认定无效的规则，用于排查问题
    tracking:
      enable: true
      path: logs/tracking.list
